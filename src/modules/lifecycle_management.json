{
    "openrpc": "1.2.4",
    "info": {
        "title": "LifecycleManagement",
        "description": "A module for managing application lifecycle.",
        "version": "0.0.0"
    },
    "components": {
        "schemas": {
            "State": {
                "type": "string",
                "description": "The application lifecycle state",
                "enum": [
                    "initializing",
                    "inactive",
                    "foreground",
                    "background",
                    "unloading",
                    "suspended"
                ]
            },
            "LifecycleParameters": {
                "title": "LifecycleParameters",
                "type": "object",
                "required": [
                  "appId"
                ],
                "properties": {
                  "appId": {
                    "description": "The application ID",
                    "type": "string"
                  }
                }
            },        
            "LifecycleResult": {
                "title": "LifecycleResult",
                "type": "object",
                "required": [
                  "parameters"
                ],
                "properties": {
                  "parameters": {
                    "description": "The associated lifecycle parameters",
                    "$ref": "#/components/schemas/LifecycleParameters"
                  }
                }
              }        
        }
    },
    "methods": [
        {
            "name": "setState",
            "summary": "Used by provider to update the state of an application so that the state can be emitted to apps.",
            "params": [
                {
                    "name": "state",
                    "schema": {
                        "$ref": "#/components/schemas/State"
                    }
                },
                {
                    "name": "appId",
                    "schema": {
                        "type": "string"
                    }
                }
            ],
            "result": {
                "name": "result",
                "schema": {
                    "const": null
                }
            },
            "examples": [
                {
                    "name": "Set application lifecycle state to inactive",
                    "params": [
                        {
                            "name": "state",
                            "value": "inactive"
                        },
                        {
                            "name": "appId",
                            "value": "SomeAppId"
                        }
                    ],
                    "result": {
                        "name": "defaultResult",
                        "value": null
                    }
                }
            ]
        },
        {
            "name": "onRequestReady",
            "summary": "Tells the provider that an app has said they are ready",
            "params": [
                {
                    "name": "listen",
                    "summary": "Whether or not to listen for requests to this interface method.",
                    "schema": {
                        "type": "boolean"
                    }
                }
            ],
            "tags": [
                {
                  "name": "capabilities",
                  "x-provides": "xrn:firebolt:capability:app:lifecycle",
                  "x-allow-focus": false
                }
              ],
            "result": {
                "name": "ready",
                "summary": "The app has said they are ready",
                "schema": {
                    "oneOf": [
                        {
                          "$ref": "https://meta.comcast.com/firebolt/types#/definitions/ListenResponse"
                        },
                        {
                          "$ref": "#/components/schemas/LifecycleResult"
                        }
                    ]            
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [
                        {
                            "name": "listen",
                            "value": true
                        }
                    ],
                    "result": {
                        "name": "Default Result",
                        "value": {
                          "parameters": {
                            "appId": "SomeAppId"
                          }
                        }
                    }
                }
            ]
        },
        {
            "name": "onRequestClose",
            "summary": "Tells the provider that an app has requested closing itself",
            "params": [
                {
                    "name": "listen",
                    "summary": "Whether or not to listen for requests to this interface method.",
                    "schema": {
                        "type": "boolean"
                    }
                }
            ],
            "tags": [
                {
                  "name": "capabilities",
                  "x-provides": "xrn:firebolt:capability:app:lifecycle",
                  "x-allow-focus": false
                }
              ],
            "result": {
                "name": "close",
                "summary": "The app has requested to be closed",
                "schema": {
                    "oneOf": [
                        {
                          "$ref": "https://meta.comcast.com/firebolt/types#/definitions/ListenResponse"
                        },
                        {
                          "$ref": "#/components/schemas/LifecycleResult"
                        }
                    ]            
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [
                        {
                            "name": "listen",
                            "value": true
                        }
                    ],
                    "result": {
                        "name": "Default Result",
                        "value": {
                          "parameters": {
                            "appId": "SomeAppId"
                          }
                        }
                    }
                }
            ]
        },
        {
            "name": "onRequestFinished",
            "summary": "Tells the provider that an app has said they are finished cleaning up while unloading",
            "params": [
                {
                    "name": "listen",
                    "summary": "Whether or not to listen for requests to this interface method.",
                    "schema": {
                        "type": "boolean"
                    }
                }
            ],
            "tags": [
                {
                  "name": "capabilities",
                  "x-provides": "xrn:firebolt:capability:app:lifecycle",
                  "x-allow-focus": false
                }
              ],
            "result": {
                "name": "finished",
                "summary": "The app has said they are finished",
                "schema": {
                    "oneOf": [
                        {
                          "$ref": "https://meta.comcast.com/firebolt/types#/definitions/ListenResponse"
                        },
                        {
                          "$ref": "#/components/schemas/LifecycleResult"
                        }
                    ]            
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [
                        {
                            "name": "listen",
                            "value": true
                        }
                    ],
                    "result": {
                        "name": "Default Result",
                        "value": {
                          "parameters": {
                            "appId": "SomeAppId"
                          }
                        }
                    }
                }
            ]
        }
    ]
}
